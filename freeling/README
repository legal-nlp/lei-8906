# -*- mode:org -*-
* produzir TXT lei a partir XML (obtido com parser Bruno):

: xsltproc ../extract.xslt ../lei-8906.xml > lei-8906.txt

Editamos o arquivo txt colocando um cabeçalho para alinhar arquivos
saida com os arquivos do diretório abaixo.

* separação dos arquivos

: split -p "---" lei-8906.txt art-

* rodar FREELING

#+BEGIN_SRC bash
DIR=/work/lei-8906-ownpt/freeling/ 
for f in $DIR/*.txt; do python3 sample.py  < $f > $DIR/$(basename $f .txt).out; done
#+END_SRC

* estatísticas
| fc36fa83b |     n | unique | unique, no-sense |
|-----------+-------+--------+------------------|
| sents     |   231 |      - |                - |
| tokens    | 10242 |   1508 |              298 |
| N         |  2629 |    727 |              190 |
| A         |   634 |    234 |               60 |
| V         |  1167 |    330 |               16 |
| R         |   268 |     77 |               32 |

** sentences

number of sentences is the same as the number of blank lines in
=art-*.out= files:

: grep -vP '\S' *.out | wc -l

** tokens

number of tokens is the number of non-blank lines in =art-*.out= files:
: grep -P '\S' *.out | wc -l

uniques:
: grep -h -P '\S' *.out | cut -f2-3 -d ' ' | grep -oE '^[^ ]+ [^ ]' | sort -u | wc -l

** POS
number of tokens with POS ={N,A,V,R}= in =art-*.out= files:
: grep -E '^[^ ]+ [^ ]+ N' *.out | wc -l
uniques:
: grep -hE '^[^ ]+ [^ ]+ N' *.out | cut -f2-3 -d ' ' |  grep -oE '^[^ ]+ [^ ]' | sort -u | wc -l

** checar tokens sem sense

Freeling não encontrou sense para tokens que deveriam ter, pois são
adjetivos, substantivos, verbos, ou advérbios.

: awk '$3 ~ /^[NAVR]/ && NF < 4 {print $2,substr($3,1,1)}' *.out | sort | uniq -c | sort -nr
