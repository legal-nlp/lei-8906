# -*- mode:org -*-
* Produzir TXT lei a partir XML (obtido com parser Bruno):
: xsltproc ../extract.xslt ../lei-8906.xml > lei-8906.txt

Editamos o arquivo txt colocando um cabeçalho para alinhar arquivos
saida com os arquivos do diretório abaixo.

* Separação dos arquivos
: split -p "---" lei-8906.txt art-

* Rodar FREELING
: for f in *.txt; do analyze --noflush -f pt.cfg < $f  > $(basename $f .txt).out ; done

* estatísticas
** sentences
number of sentences is the same as the number of blank lines in =art-*.out=
files:
: grep -vP '\S' art-*.out | wc -l
** tokens
number of tokens is the number of non-blank lines in =art-*.out= files:
: grep -P '\S' art-*.out | wc -l
** POS
number of tokens with POS ={N,A,V,R}= in =art-*.out= files:
: grep -E '^[^ ]+ [^ ]+ N' art-*.out | wc -l

* checar tokens sem sense
Freeling não encontrou sense para tokens que deveriam ter, pois são
adjetivos, substantivos, verbos, ou advérbios.
** in each article
: for f in *.out; do grep -E '^[^ ]+ [^ ]+ [VNAR][^ ]+ [^ ]+ -' $f > missing-$f; done
** total, no duplicates
#+BEGIN_SRC sh
for f in *.out; do grep -E '^[^ ]+ [^ ]+ [VNAR][^ ]+ [^ ]+ -' $f | cut -f1-2 -d ' ' >> all-missing-senses.txt ; done
# count
sort -u all-missing-senses.txt | wc -l
# frequency
sort all-missing-senses.txt | uniq -c | sort -nr
#+END_SRC
